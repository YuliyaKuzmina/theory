# HTTP-сообщения #   

Это обмен данными между сервером и клиентом.  
Бывают двух видов: запросы - сообщения, которые отправляет клиент на сервер, вызывая его реакцию; и ответы сервера.  
HTTP-это протокол, который использует надежные службы протокола ТСР для передачи содержимого, из-за этого протокол HTTP является надежным и безопасным для обмена данными. Все операции в Интернете используют протокол HTTP (распространены версия HTTP/2 и HTTP/1.1). Само сообщение выглядgит, как информация, записанная в несколько строчек.  

**Запросы (Requests)**.  
Есть стандартный набор команд HTTP, которые отправляются клиентом после успешного установления подключения по стандартному TCP-порту.  

Примеры запросов клиента:  

GET ресурс HTTP/1.1: получение указанного ресурса.  
POST ресурс HTTP/1.1: получение указанного ресурса и передача вложенных входных данных на HTTP-сервер.  
HEAD ресурс HTTP/1.1: выполняется так же, как GET, но HTTP-сервер не возвращает содержимое.  
PUT ресурс HTTP/1.1: размещение ресурса на HTTP-сервере.  
DELETE ресурс HTTP/1.1: удаление ресурса с сервера.


**Ответы (Responses)**  
HTTP-сервер использует для отправки ответов TCP-порт 80 (или порт 443 для HTTPS) . Когда HTTP-сервер завершает обработку команды клиента, он возвращает строку ответа ASCII, которая включает в себя 3-значный числовой код состояния. Программное обеспечение клиента по этому числовому ответу определяет, была ли операция выполнена успешно или завершилась сбоем.   

Примеры ответов HTTP-сервера на команды клиента:

200: запрос выполнен успешно.  
400: запрос не сформирован должным образом.  
401: клиент должен отправить данные проверки подлинности.  
404: указанный в запросе ресурс не найден.  
500: внутренняя ошибка HTTP-сервера.  
501: запрос не реализован HTTP-сервером.  
502: служба недоступна.

### Структура HTTP-сообщений ###
 
Каждое HTTP-сообщение состоит из частей, которые передаются в указанном порядке:   
1. Стартовая строка (Starting line) — определяет тип сообщения, описание версии;  
2. Заголовки (Headers) — основа запроса, характеризуют тело сообщения, параметры передачи и прочие сведения;  
3. Тело сообщения (Message Body) — непосредственно передаваемые данные сообщения, документ (HTML-страница), содержащийся в ответе.  

*Между Заголовком и Телом сообщения есть пустая строчка - характеризирует, что все данные для запроса или ответа были переданы*  
 

### 1. Стартовая строка ###  
Стартовая строка HTTP-запроса состоит из трех элементов:

 - <u>Метод HTTP-запроса</u> (method, термин verb). Обычно это короткое слово на английском, которое указывает, что конкретно нужно сделать с запрашиваемым ресурсом. 
 - <u>Цель запроса</u>. Представлена указателем ресурса URL, который состоит из протокола, доменного имени (или IP-адреса), пути к конкретному ресурсу на сервере. Дополнительно может содержать указание порта, несколько параметров HTTP-запроса и опций.
 - <u>Версия используемого протокола</u> (либо HTTP/1.1, либо HTTP/2), которая определяет структуру следующих за стартовой строкой данных. 

В примере ниже стартовая строка указывает, что в качестве метода используется GET, обращение будет произведено к ресурсу /index.html, по версии протокола HTTP/1.1:
  ![картинка](https://selectel.ru/blog/wp-content/uploads/2022/06/image.png)   

  
Стартовая строка HTTP-ответа называется Status line - **строка статуса** содержит версию протокола, код состояния и пояснение:  

**HTTP/1.1 200 OK**   

Категории кодов состояния:  
1** - информационный характер;  
2** - возвращается в случае успешной обработки запроса;  
3** - возвращается, когда серверу нужно перенаправить клиента;  
4** - возвращается, когда на стороне клиента некорректный запрос, или нет доступа к запрашиваемому ресурсу;  
5** - ошибка на стороне сервера
### 2. Заголовок ###  
HTTP-заголовок представляет собой строку формата «Имя-Заголовок:Значение», с двоеточием(:) в качестве разделителя. Название заголовка не учитывает регистр. Однако в названиях заголовков принято начинать каждое новое слово с заглавной буквы. Структура значения зависит от конкретного заголовка. 

В запросах может передаваться большое число различных заголовков, но все их можно разделить на три категории:

- <u>Общего назначения</u>, которые применяются ко всему сообщению целиком.
- <u>Заголовки запроса</u> уточняют информацию о запросе, сообщая дополнительный контекст или ограничивая его логическими условиями. Используется только в запросе.  
- <u>Заголовки ответа</u> - используются только в ответах.
- <u>Заголовки представления</u>, которые описывают формат данных сообщения и используемую кодировку. Добавляются к запросу только в тех случаях, когда с ним передается некоторое тело.  

### 3. Тело сообщения ###

Тело сообщения - это непосредственно данные сообщения. Но не каждому методу требуется тело (таким как GET, DELETE, OPTIONS, HEAD), т.к. информация передается в заголовке.  Тело сообщения не ограничено по объему. Это необязательный параметр и может отсутствовать в сообщении.

  ## Методы ##  

Методы позволяют указать конкретное действие, которое мы хотим, чтобы сервер выполнил, получив наш запрос. Так, некоторые методы позволяют браузеру отправлять дополнительную информацию в теле запроса — например, заполненную форму или документ.  

**GET** - позволяет запросить ресурс, который хочет получить пользователь. Дополнительные данные могут быть переданы через строку запроса (Query String) в сотаве URL.  

**POST** - создание нового ресурса, позволяет отправить данные на сервер. Поддерживает отправку различных типов файлов: текст, PDF-файлы и другие данные в двоичном виде. Обычно используется при отправке информации (введение логина при авторизации), и загрузке данных (изображение, документы)  

**DELETE** - позволяет удалить существующие данные на сервере.  

**PUT** - для обновления конкретного ресурса на сервере.  

**HEAD** - используется, чтобы узнать размер запрашиваемого ресурса перед его загрузкой. Запрашивает ресурс, но ответ приходит без тела.  

**OPTIONS** - запрашивает информацию о сервере, также информацию о разрешенных к использованию на сервере методах и ресурсах.  

**PATCH** - позволяет внести частичные изменения в указанный ресурс по указанному расположению.  

**CONNECT** - особый метод для установки сетевых туннелей к центральному серверу через прокси-сервер (для VPN-соединений). Поддержка защищенного соединения (HTTPS)  

**TRACE** -  для получения диагностических данных от сервера. Он позволяет клиенту увидеть, как сервер обрабатывает запросы, это может быть полезно для отладки.